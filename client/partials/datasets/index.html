<div class="header">
<h3>Your Datasets</h3>
</div>
<p>
<span p class="pull-right">Total Datasets : {{posts.length}} </span>
<a href="#/datasets/create" role="button" class="btn btn-xs btn-primary"> Add New Dataset  <i class="fa fa-plus-circle"></i></a>
</p>

<table ng-table="" class="table table-striped">
  <tbody>
    <tr ng-repeat="post in posts">
      <td data-title="'File name'" sortable="filename"><a ng-href="{{ (post.index_state == 'done') ? '#/datasets/'+post.id+'/topograms/create' : '#/datasets/' + post.id +'/'}}" role="button">{{post.csvfilename}}</a></td>
      <td data-title="'Title'" sortable="'title'"> {{post.title}}</td>
      <td data-title="'Description'">{{post.description}}</td>
      <td data-title="'State'" ng-switch-on="post.index_state">
        <a ng-if="post.index_state=='raw'" class="btn btn-sm btn-default" href="#/datasets/{{post.id}}">Index Now</a>
        <p ng-if="post.index_state=='processing'">Processing...</p>
        <p ng-if="post.index_state=='done'">Done</p>
      </td>

      <td data-title="'created_at'" sortable="'created_at'">{{post.created_at | date:'medium'}}</td>
      <td data-title="'Topogram'"><a href="#/datasets/{{ post.id }}/topograms/create" class="btn btn-primary btn-sm" ng-disabled="{{ (post.index_state == 'done') ? false : true }}" >Create <i class="fa fa-icon fa-plus"></i></a></td>
      <td data-title="'Delete'"><a  ng-click="delete(post)" role="button" class="btn btn-default btn-sm">Delete</a></td>
    </tr>
  </tbody>
</table>

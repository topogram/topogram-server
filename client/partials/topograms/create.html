<div class="page-header">
  <h3>Create Topogram</h3>
</div>

<section id="timeseries">
        <h4>Time series  <small>Quantity of data over time</small></h4>
        <p>
            <a class="btn btn-sm btn-primary" ng-click="getTimeSeries()">Update Time Series</a> 
        </p>
        <timeseries ng-hide="!timeData" timeseries="" time-data="timeData" start="start" end="end"></timeseries>
</section>
<hr>
<section  class="frequent-words">

      <h4>Most frequent words
          <small>Display the most used  words in the dataset.</small>
      </h4>
      <div class="row">
          <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
              <button class="btn btn-sm btn-primary" ng-click="getMostFrequentWords()">Most Frequent Words</button>

              <form class="form-inline">
                    <label>Word count : </label>
                    <div class="form-group">
                      <a class="btn btn-default btn-xs" ng-click="topogram.frequent_words_limit = topogram.frequent_words_limit + 10">+</a>
                      <input type="text" class="form-control" ng-model="topogram.frequent_words_limit">
                      <a class="btn btn-default btn-xs" ng-click="topogram.frequent_words_limit = topogram.frequent_words_limit - 10">-</a>
                    </div>
                    <p class="help-block">Select the number of words you want.</p>
              </form>
          </div>
          <div ng-hide="!frequentWords.length" id="frequent-words" class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
              <div style="height:250px; overflow:auto">
                  <table show-filter="true" class="table table-condensed">
                      <thead>
                        <tr>
                          <th></th>
                          <th>Word</th>
                          <th>Count</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-style="{color: wordColors(row.degree)}" ng-repeat="word in frequentWords">
                        <td>{{$index + 1}}</td>
                        <td>{{word.word }}</td>
                        <td>{{word.count }}</td>
                      </tr>
                    </tbody>
                  </table>
              </div>
          </div>
      </div>
</section>
<hr>
<!-- <section class="words-graph">
    <div class="row">
        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
        </div>
    </div>
</section> -->

<section id="words">
    <h4>Semantic graph <small>Co-occurences of words in the datasets</small></h4>
     <button ng-click="getWordsGraph()" ng-disabled="wordsGraphLoading"  class="btn btn-sm btn-primary">Compute Word Graph</button>
     <img ng-hide="!wordsGraphLoading" src="/img/circle-loader.gif" alt=""></div>
    <p ng-hide="!wordsGraphLoading" class="help-block">This operation make take some time. Thanks !</p>

    <span ng-hide="!wordsGraphTooBig" class="alert-danger" >
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        <span class="sr-only">Error:</span>
        The graph is too big to be displayed. Please  adjust the minimum threshold for  words
    </span>

     <div> 

     <p>Minimum degree in the graph <small>({{topogram.words_limit}})</small>  </p>
    <div class="form-inline" >
        <div class="form-group">
              <a class="btn btn-default btn-xs" ng-click="topogram.words_limit = topogram.words_limit + 10">+</a>
              <input type="text" class="form-control" ng-model="topogram.words_limit">
              <a class="btn btn-default btn-xs" ng-click="topogram.words_limit = topogram.words_limit - 10">-</a>
          </div>
        <!-- <slider ng-model="topogram.words_limit" min="0" step="10" max="{{topogram.words_limit*2}}" value="{{topogram.words_limit}}" data-slider-orientation="horizontal" id="wordsLimit"></slider> -->
        <p class="help-block">Max words in the graph : 250</p>
    </div>

    <div class="row">
          <div class="col-xs-3 col-sm-3">
              <div class="well">
                    <h4><small><a data-toggle="popover" popover-placement="right" popover-title="Help - Read the Semantic Graph" tooltip-html-unsafe="true" popover="
                    Stroke weight represents link intensity between 2 words.
                    Size represent the degree of each words.
                    Colors represent the degree of each words.
                    "  popover-append-to-body="true">Help</a></small></h4>

                    <p class="help-block">This graph represents the co-occurence of words quoted in the corpus.</p>

                    <p><a href="#" type="button" ng-click="saveWords(); $event.preventDefault()" class="btn-sm btn-primary btn-save btn-save-png"><span class="glyphicon glyphicon-save"></span>Save</a>   or hit <small> Shift+W</small></p>
              </div>
              <h5>Most connected words</h5>
              <!-- <a class="btn btn-xs" ng-click="prevTopWords()"><< prev</a> 
              {{Â wordsListStart }} | {{wordsListEnd}}<a class="btn btn-xs" ng-click="nextTopWords()">next >></a> -->
              <div style="height:220px; overflow:auto;">
                  <table show-filter="true" class="table table-condensed" style="height:220px; overflow:scroll">
                      <thead>
                        <tr>
                          <th></th>
                          <th>Word</th>
                          <th>Degree</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-style="{color: wordColors(row.degree)}" ng-repeat="row in wordsGraph.top_words.slice(wordsListStart,wordsListEnd)">
                        <td>{{$index + 1}}</td>
                        <td>{{row.node }}</td>
                        <td>{{row.degree }}</td>
                      </tr>
                    </tbody>
                  </table>
              </div>
          </div>

          <div class="col-xs-9 col-sm-9">
                <words words="" words-graph="wordsGraph" words-force-started="wordsForceStarted" start="start" end="end" class="words-container"></words>
          </div>
    </div>
</section>

<!-- <section class="row" id="filter-words">
  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
      <div class="active">
          <div class="form-inline">
                  <h4>
                      Excluded Words<small>({{topogram.excludeWords.length}})</small>
                  </h4>
                  <input type="text" class="form-control" ng-model="addedStopWord" placeholder="Add stopword">
                  <a  type="submit" class="btn btn-default" ng-click="addWord()">Add</a>
          </div>
          <p class="help-block">Those words will be ignored</p>
          <p><span class="badge"ng-repeat="stopword in topogram.stopwords">{{ stopword }}</span></p>
      </div>
  </div>
  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
      <div class="active">
          <div class="form-inline">
                  <h4>
                      Included Words<small>({{topogram.includeWords.length}})</small>
                  </h4>
                  
                  <input type="text" class="form-control" ng-model="addedStopWord" placeholder="Add stopword">
                  <a  type="submit" class="btn btn-default" ng-click="addWord()">Add</a>
          </div>
          <p class="help-block">Those words will be ignored</p>
          <p><span class="badge"ng-repeat="stopword in topogram.stopwords">{{ stopword }}</span></p>
      </div>
  </div>  
</section> -->

<!--     <div class="form-group" >
        <h4>Maximum Citations <small>({{topogram.citations_limit}})</small>  </h4>
        <slider ng-model="topogram.citations_limit" min="0" step="1" max="50" data-slider-orientation="horizontal" id="citationsLimit"></slider>
        <p class="help-block">Maximum number of citations in the graph.</p>
    </div>
 -->    

<!-- 
      <div ng-hide="loadingNetworks.percent==0 || loadingNetworks.percent==100">
            <p>Now processing...</p>
            <progressbar class="progress-striped active" max="100" value=" loadingNetworks.percent" type="danger"><i>{{ loadingNetworks.current}} / {{ totalResults}}</i></progressbar>
      </div>

      <div class="col-md-6 utils form-group" ng-hide="!readyToSave">
              <label for="inputDesc">Description</label>
              <textarea id="inputDesc" ng-model="description" placeholder="What is this visualization about?" rows="3" class="form-control"></textarea>
              <div class="modal-footer">
                <button type="button" class="btn btn-default">Cancel</button>
                <a type="submit" ng-click="saveTopogram()" class="btn btn-primary">Save</a>
              </div>
      </div>
  </div> -->
 
  <!-- <section class="results"> -->
    <!-- <h3 ng-hide="messages.length" class="no-recipes">No results</h3> -->
    
  <!-- </section> -->
<!-- 
    <section ng-hide="!messages.length" class="recipe">
      <h3>Total : {{ totalResults }} results<small> in {{ index }}</small></h3>
      <timeserie timeserie="" time-data="timeData" start="start" end="end" topogram-name="searchTerm"></timeserie>
    </section>

    <section class="messages" ng-hide="!messages.length">
      <table ng-table show-filter="true" class="table table-condensed">
        <thead>
          <tr>
            <th ng-repeat="column in columns" class="text-center sortable"
            >  {{column.field }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="row in messages">
          <td ng-repeat="column in columns" tooltip-append-to-body="true">
            {{row[column.field] }}
          </td>
        </tr>
      </tbody>
    </table>
    <div ng-cloak="" ng-hide="allResults" class="load-more"><a ng-click="loadMore()" class="btn btn-default">View more results...</a></div>
  </section>
</section>
 -->

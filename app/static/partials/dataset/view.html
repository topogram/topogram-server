<h3>{{dataset.title}}</h3>
<p>{{dataset.description}}</p>

<!-- <h4>index data</h4> -->
<!-- <p><strong>Index</strong> : {{dataset.index_name}}</p>
<p><strong>type</strong> : {{dataset.type}}</p> -->

<h2>Search for messages</h2>
<div class="row">
  <section class="col-md-8 searchField">
    <form ng-submit="search()" role="form" class="form-inline"><span class="help-block">Use operators AND, OR and quotes for more precise queries <a href="http://lucene.apache.org/core/2_9_4/queryparsersyntax.html" target="_blank">[help]</a></span>
      <input ng-model="searchTerm" type="search" name="title" class="form-control"/>
      <!-- <select ng-model="index" ng-options="index for index in indices" class="form-control"></select> -->
      <button type="submit" class="btn btn-default">Get results</button>
    </form>
  </section>
  <section class="col-md-4 utils">
    <p>
      <button data-toggle="modal" data-target="#saveModal" class="btn btn-primary">Create a new visualization from this query</button>
    </p>
  </section>
</div>

<section class="results">
  <h3 ng-hide="messages.length" class="no-recipes">No results</h3>
  <article ng-hide="!messages.length" class="recipe">
    <h3>Total : {{ totalResults }} results<small> in {{ index }}</small></h3>
    
    <timeserie timeserie="" time-data="timeData" start="start" end="end" meme-name="searchTerm"></timeserie>

    <table ng-table show-filter="true" class="table table-condensed">
      <thead>
      <tr>
        <th ng-repeat="column in columns" class="text-center sortable" ng-class="{
                        'sort-asc': tableParams.isSortBy(column.field, 'asc'),
                        'sort-desc': tableParams.isSortBy(column.field, 'desc')
                      }" ng-click="tableParams.sorting(column.field, tableParams.isSortBy(column.field, 'asc') ? 'desc' : 'asc')">
            {{column.field}}
        </th>
        </tr>
      </thead>
      <tbody>
      <tr ng-repeat="row in messages">
        <td ng-repeat="column in columns">
            {{row[column.field]}}
        </td>
      </tr>
      </tbody>
    </table>
    <div ng-cloak="" ng-hide="allResults" class="load-more"><a ng-click="loadMore()" class="btn btn-default">View more results...</a></div>

  </article>
</section>

<!-- Modal-->
<div id="saveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <button type="button" data-dismiss="modal" class="close"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button> -->
        <h4 id="myModalLabel" class="modal-title">Save search <small>for later use</small></h4>
      </div>
      <div class="modal-body">

        <div class="alert">
        <img src="/img/loader.gif" alt="">processing... </div>
        <form role="form" name="memeForm" ng-submit="submitMeme(memeForm.$valid)" class="form-horizontal">
          <div class="form-group">
            <label for="inputQuery" class="col-sm-2 control-label">Query</label>
            <div class="col-sm-10">
              <input id="inputQuery" disabled="disabled" placeholder="{{searchTerm}}" class="form-control"/>
            </div>
            <label for="inputIndex" class="col-sm-2 control-label">Index</label>
            <div class="col-sm-10">
              <input id="inputIndex" disabled="disabled" placeholder="{{index}}" class="form-control"/>
            </div>
          </div>
          <div class="form-group">
            <label for="imputDesc" class="col-sm-2 control-label">Description</label>
            <div class="col-sm-10">
              <textarea id="imputDesc" placeholder="{{description}}" class="form-control"></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" data-dismiss="modal" class="btn btn-default">Cancel</button>
            <button type="submit" ng-click="createMeme()" class="btn btn-primary">Save changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
